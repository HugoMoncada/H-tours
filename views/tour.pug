extends base

block append head
    // Exposes stripe object to the global scope 
    script(src="https://js.stripe.com/v3/")

block content
    section.jumbo.mb-5
        .jumbo-head
            .overlay
            .tour-tittle
                span.tour-name.mb-4= `${tour.name} Tour`
                article.tour-jumbo-data
                    <svg xmlns="http://www.w3.org/2000/svg" width="23" height="23" fill="currentColor" class="bi bi-clock" viewBox="0 0 16 16">
                        <path d="M8 3.5a.5.5 0 0 0-1 0V9a.5.5 0 0 0 .252.434l3.5 2a.5.5 0 0 0 .496-.868L8 8.71V3.5z"/>
                        <path d="M8 16A8 8 0 1 0 8 0a8 8 0 0 0 0 16zm7-8A7 7 0 1 1 1 8a7 7 0 0 1 14 0z"/>
                    </svg>
                    span.me-3= tour.duration
                    <svg xmlns="http://www.w3.org/2000/svg" width="23" height="23" fill="currentColor" class="bi bi-geo-alt" viewBox="0 0 16 16">
                        <path d="M12.166 8.94c-.524 1.062-1.234 2.12-1.96 3.07A31.493 31.493 0 0 1 8 14.58a31.481 31.481 0 0 1-2.206-2.57c-.726-.95-1.436-2.008-1.96-3.07C3.304 7.867 3 6.862 3 6a5 5 0 0 1 10 0c0 .862-.305 1.867-.834 2.94zM8 16s6-5.686 6-10A6 6 0 0 0 2 6c0 4.314 6 10 6 10z"/>
                        <path d="M8 8a2 2 0 1 1 0-4 2 2 0 0 1 0 4zm0 1a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"/>
                    </svg>
                    span.my-auto= tour.startLocation.description
            image.jumbo-image(src=`/img/tours/${tour.imageCover}`, alt='')
    
    main.tour-main.container.mb-5
        .row
            .col-sm-12.col-md-6.mb-3.quick-facts
                p.main-tittle.mb-4 Quick facts
                div.mb-4
                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="currentColor" class="bi bi-calendar-event" viewBox="0 0 16 16">
                        <path d="M11 6.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5v-1z"/>
                        <path d="M3.5 0a.5.5 0 0 1 .5.5V1h8V.5a.5.5 0 0 1 1 0V1h1a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h1V.5a.5.5 0 0 1 .5-.5zM1 4v10a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V4H1z"/>
                    </svg>
                    span.me-3.bold  NEXT DATE
                    span.value.text-tour-page= tour.startDates[0].toLocaleString("en-us", {month: "long", year: "numeric"})
                div.mb-4
                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="currentColor" class="bi bi-chevron-double-up" viewBox="0 0 16 16">
                        <path fill-rule="evenodd" d="M7.646 2.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1-.708.708L8 3.707 2.354 9.354a.5.5 0 1 1-.708-.708l6-6z"/>
                        <path fill-rule="evenodd" d="M7.646 6.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1-.708.708L8 7.707l-5.646 5.647a.5.5 0 0 1-.708-.708l6-6z"/>
                    </svg>
                    span.me-3.bold  DIFFICULTY
                    span.value.text-tour-page= tour.difficulty
                div.mb-4    
                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="currentColor" class="bi bi-person" viewBox="0 0 16 16">
                        <path d="M8 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6zm2-3a2 2 0 1 1-4 0 2 2 0 0 1 4 0zm4 8c0 1-1 1-1 1H3s-1 0-1-1 1-4 6-4 6 3 6 4zm-1-.004c-.001-.246-.154-.986-.832-1.664C11.516 10.68 10.289 10 8 10c-2.29 0-3.516.68-4.168 1.332-.678.678-.83 1.418-.832 1.664h10z"/>
                    </svg>
                    span.me-3.bold  PARTICIPANTS
                    span.value.text-tour-page= tour.maxGroupSize

                div.mb-5
                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="currentColor" class="bi bi-star" viewBox="0 0 16 16">
                        <path d="M2.866 14.85c-.078.444.36.791.746.593l4.39-2.256 4.389 2.256c.386.198.824-.149.746-.592l-.83-4.73 3.523-3.356c.329-.314.158-.888-.283-.95l-4.898-.696L8.465.792a.513.513 0 0 0-.927 0L5.354 5.12l-4.898.696c-.441.062-.612.636-.283.95l3.523 3.356-.83 4.73zm4.905-2.767l-3.686 1.894.694-3.957a.565.565 0 0 0-.163-.505L1.71 6.745l4.052-.576a.525.525 0 0 0 .393-.288l1.847-3.658 1.846 3.658a.525.525 0 0 0 .393.288l4.052.575-2.906 2.77a.564.564 0 0 0-.163.506l.694 3.957-3.686-1.894a.503.503 0 0 0-.461 0z"/>
                    </svg>
                    span.me-3.bold  RATING 
                    span.value.text-tour-page=  `${tour.ratingsAverage} / 5`

                p.main-tittle.mb-4 YOUR TOUR GUIDES
                each guide in tour.guides
                    .d-flex.mb-3
                        img.guide-photo(src=`/img/users/${guide.photo}`, alt=`${guide.name} photo`)
                        -if(guide.role === "lead-guide") 
                            p.my-auto.mx-3.bold Lead Guide
                        -if(guide.role === "guide") 
                            p.my-auto.mx-3.bold Tour Guide
                        p.my-auto.text-tour-page.guide-name= guide.name
            
            .col-sm-12.col-md-6.description-col.mt-4
                p.main-tittle.mb-4= `about the ${tour.name} tour`
                p.tour-description.text-tour-page= tour.description
       
    .pictures-box.row.container-fluid.mx-auto.mb-5
        each image in tour.images
            .col-md-4.col-sm-12
                .card
                    img(src=`/img/tours/${image}`, alt=`${tour.name}`)



    .reviews.mb-5
        each review in tour.reviews
            .card.pt-3.mr-5
                .card-header.d-flex.mx-auto.py-4.mb-3
                    img(src=`/img/users/${review.user.photo}`, alt=`${review.user.name} photo`)
                    span.my-auto.bold= review.user.name
                .card-body.mb-3
                    p= `"${review.review}"`
                .card-footer.py-3
                    .stars.d-flex-mx-auto.text-center
                        each star in [1,2,3,4,5]
                            -if(review.rating >= star)
                                //- full star
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-star-fill" viewBox="0 0 16 16">
                                    <path d="M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.283.95l-3.523 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z"/>
                                </svg>  
                            -else
                                //- empty star
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-star" viewBox="0 0 16 16">
                                    <path d="M2.866 14.85c-.078.444.36.791.746.593l4.39-2.256 4.389 2.256c.386.198.824-.149.746-.592l-.83-4.73 3.523-3.356c.329-.314.158-.888-.283-.95l-4.898-.696L8.465.792a.513.513 0 0 0-.927 0L5.354 5.12l-4.898.696c-.441.062-.612.636-.283.95l3.523 3.356-.83 4.73zm4.905-2.767l-3.686 1.894.694-3.957a.565.565 0 0 0-.163-.505L1.71 6.745l4.052-.576a.525.525 0 0 0 .393-.288l1.847-3.658 1.846 3.658a.525.525 0 0 0 .393.288l4.052.575-2.906 2.77a.564.564 0 0 0-.163.506l.694 3.957-3.686-1.894a.503.503 0 0 0-.461 0z"/>
                                </svg>
    
    .call-to-accion.mb-5.mt-5.container.p-4
        div.mx-auto.d-flex
            .info.p-4.mx-auto
                p.call-tittle.mb-2 what are you waiting for?
                p.call-description=`${tour.duration} days. 1 adventure. Infinite memories. Make it yours today.` 
            .call-button.my-auto.mx-auto
                if user 
                    a#bookTourBtn.btn.rounded-pill.my-auto.px-5.py-3(data-tour-id=`${tour.id}`) BOOK TOUR NOW!
                else
                    a.btn.rounded-pill.my-auto.px-5.py-3(href=`/login`) LOGIN TO TOUR BOOK

block append scripts
    script(src="/js/tour.js")
        
    

       
       
       
       

        